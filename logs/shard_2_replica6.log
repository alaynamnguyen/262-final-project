Exception in thread Thread-2 (loop):
Traceback (most recent call last):
  File "/Users/alaynanguyen/Documents/GitHub/262-final-project/server/shard.py", line 93, in loop
    response = stub.Heartbeat(request)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/grpc/_channel.py", line 1181, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/grpc/_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:5040: Failed to connect to remote host: connect: Connection refused (61)"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:5040: Failed to connect to remote host: connect: Connection refused (61)", grpc_status:14, created_time:"2025-04-24T21:28:48.749788-04:00"}"
>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
  File "/opt/anaconda3/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/alaynanguyen/Documents/GitHub/262-final-project/server/shard.py", line 99, in loop
    self.leader_election()
  File "/Users/alaynanguyen/Documents/GitHub/262-final-project/server/shard.py", line 107, in leader_election
    new_leader_address = min(self.replicas)
                         ^^^^^^^^^^^^^^^^^^
ValueError: min() iterable argument is empty
REPLICA for shard_2 listening on 127.0.0.1:5046
Replica for shard_2 initialized at 127.0.0.1:5046
  -> Leader: 127.0.0.1:5040
Starting replica heartbeat loop...
[127.0.0.1:5046] Failed to reach leader 127.0.0.1:5040: time to leader elect
Traceback (most recent call last):
  File "/Users/alaynanguyen/Documents/GitHub/262-final-project/server/shard.py", line 285, in <module>
    serve(args.role, args.shard_id, args.port, args.config)
  File "/Users/alaynanguyen/Documents/GitHub/262-final-project/server/shard.py", line 273, in serve
    servicer.on_server_start()
  File "/Users/alaynanguyen/Documents/GitHub/262-final-project/server/shard.py", line 58, in on_server_start
    response = stub.RegisterReplica(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/grpc/_channel.py", line 1181, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/grpc/_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:5040: Failed to connect to remote host: connect: Connection refused (61)"
	debug_error_string = "UNKNOWN:Error received from peer  {created_time:"2025-04-24T21:28:48.760181-04:00", grpc_status:14, grpc_message:"failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:5040: Failed to connect to remote host: connect: Connection refused (61)"}"
>
